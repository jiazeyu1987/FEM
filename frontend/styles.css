:root{
  --bg:#1e1e1e; --panel:#252526; --border:#3c3c3c;
  --text:#d4d4d4; --muted:#9da0a6; --blue:#0e639c; --green:#22c55e; --red:#f87171; --yellow:#f59e0b;
}
*{box-sizing:border-box} html,body,#app{height:100%} body{margin:0;background:var(--bg);color:var(--text);font-family:Segoe UI,Roboto,Inter,system-ui,Arial}
.titlebar{height:38px;display:flex;align-items:center;justify-content:space-between;padding:0 12px;border-bottom:1px solid var(--border);background:linear-gradient(#2a2a2a,#1e1e1e)}
.title{font-weight:600;color:#e5e5e5} .title-left .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px}
.dot.red{background:#ff5f56}.dot.yellow{background:#ffbd2e}.dot.green{background:#27c93f}
.container{display:flex;height:calc(100% - 38px)}
.sidebar{width:300px;border-right:1px solid var(--border);background:var(--panel);padding:12px;overflow:auto}
.section{margin-bottom:14px} .section.small{font-size:12px;color:var(--muted)}
.label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
input[type="number"],input[type="text"],button{width:100%;padding:8px 10px;background:#1f1f1f;border:1px solid var(--border);color:var(--text);border-radius:4px}
button{cursor:pointer;background:var(--blue);border-color:#0b5a86} button:disabled{opacity:.5;cursor:not-allowed}
.checkboxes label{display:block;margin:4px 0;font-size:13px}
.criteria details{margin-bottom:8px}
.criteria ul{margin:6px 0 0 18px;padding:0;color:#cbd5e1;font-size:12px}
.criteria .grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.criteria .grid label{display:flex;flex-direction:column;font-size:12px;color:#cbd5e1}
.criteria .grid input{margin-top:4px}
.main{flex:1;display:block;padding:12px;overflow:auto;min-height:0}
.content-grid{display:grid;grid-template-columns:1fr 320px;gap:12px;align-items:start}
.left-col{display:flex;flex-direction:column;gap:12px;min-width:0}
.panel{border:1px solid var(--border);background:var(--panel);border-radius:6px;overflow:hidden}
.panel.video-panel{display:flex;flex-direction:column;min-height:40vh}
.panel-header{padding:8px 10px;border-bottom:1px solid var(--border);font-weight:600}
.panel-body{padding:10px}
.panel.video-panel .panel-body.video-box{flex:1}
.video-box{position:relative;display:flex;align-items:center;justify-content:center;height:100%;min-height:360px}
.video-wrap{position:relative;transform-origin:top left}
video{display:block;border:1px dashed var(--border);background:#111;object-fit:contain;width:100%;height:100%}
#overlay{position:absolute;left:0;top:0;pointer-events:auto}
.panning{cursor:grabbing}
.hint{position:absolute;right:8px;bottom:8px;font-size:12px;color:var(--muted);background:rgba(0,0,0,.35);padding:4px 6px;border-radius:4px}
.result-text{margin-bottom:8px}
.badges{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0}
.badge{font-size:12px;padding:3px 8px;border-radius:999px;border:1px solid var(--border);background:#1f2937;color:#e5e7eb}
.badge.ok{background:rgba(34,197,94,.15);border-color:#166534;color:#22c55e}
.badge.no{background:rgba(248,113,113,.12);border-color:#7f1d1d;color:#f87171}
.stats{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0}
.curve-toggle{display:flex;gap:16px;align-items:center;margin:6px 0 8px 0;font-size:12px;color:#cbd5e1}
.curve-toggle label{display:inline-flex;gap:4px;align-items:center}
.judge{display:flex;gap:12px;align-items:center;margin:6px 0}
.judge-indicator{width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-weight:700;background:#991b1b;color:#fff}
.judge-indicator.ok{background:#166534}
.stat{background:#111827;border:1px solid var(--border);border-radius:6px;padding:6px 8px;font-size:12px;color:#cbd5e1}
.stat .k{color:#9da0a6;margin-right:4px}
.events{margin-top:8px}
.events-header{font-weight:600;margin-bottom:6px}
.events-body{max-height:180px;overflow:auto;border:1px solid var(--border);border-radius:6px}
table{width:100%;border-collapse:collapse;font-size:12px}
thead{background:#111827;color:#cbd5e1}
th,td{padding:6px 8px;border-bottom:1px solid var(--border)}
tbody tr:hover{background:#0b1220}
/* layout: chart left, events right */
.chart-with-events{display:grid;grid-template-columns:1fr 280px;gap:12px;align-items:start}
.chart-area{display:flex;flex-direction:column;gap:8px}
.events-pane .events-body{max-height:60vh;overflow:auto;border:1px solid var(--border);border-radius:6px}

/* 批量处理相关样式 */
#selectFolderBtn {
  width: 100%;
  background: #10b981;
  border-color: #059669;
}

#selectFolderBtn:hover {
  background: #059669;
}

#batchAnalyzeBtn {
  width: 100%;
  background: #8b5cf6;
  border-color: #7c3aed;
}

#batchAnalyzeBtn:hover {
  background: #7c3aed;
}

#batchAnalyzeBtn:disabled {
  background: #6b7280;
  border-color: #4b5563;
}

.batch-progress {
  margin: 10px 0;
  padding: 8px;
  background: #111827;
  border: 1px solid var(--border);
  border-radius: 4px;
}

.progress-bar {
  height: 20px;
  background: #374151;
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 8px;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #10b981);
  transition: width 0.3s ease;
  border-radius: 3px;
}

.progress-text {
  text-align: center;
  font-size: 12px;
  color: var(--muted);
}

.batch-file-list {
  margin-top: 10px;
}

.batch-list-header {
  font-size: 12px;
  color: var(--text);
  margin-bottom: 6px;
  font-weight: 600;
}

.batch-files {
  max-height: 120px;
  overflow-y: auto;
  border: 1px solid var(--border);
  border-radius: 4px;
  background: #111827;
}

.batch-file-item {
  padding: 6px 10px;
  font-size: 11px;
  color: var(--muted);
  border-bottom: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.batch-file-item:last-child {
  border-bottom: none;
}

.batch-file-item.processing {
  color: #3b82f6;
}

.batch-file-item.success {
  color: #10b981;
}

.batch-file-item.error {
  color: #ef4444;
}

.batch-file-status {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 10px;
  background: var(--panel);
}

.batch-summary {
  background: #111827;
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 12px;
  margin-top: 8px;
}

.batch-summary h4 {
  margin: 0 0 10px 0;
  font-size: 14px;
  color: var(--text);
}

.batch-stat {
  display: flex;
  justify-content: space-between;
  margin: 6px 0;
  font-size: 12px;
}

.batch-stat-label {
  color: var(--muted);
}

.batch-stat-value {
  color: var(--text);
  font-weight: 600;
}

#exportBtn {
  background: #059669;
  border-color: #047857;
}

#exportBtn:hover {
  background: #047857;
}

/* ROI控件样式 */
.roi-controls {
  background: #111827;
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 12px;
}

#selectROICenterBtn {
  background: #f59e0b;
  border-color: #d97706;
  padding: 6px 12px;
  font-size: 12px;
}

#selectROICenterBtn:hover {
  background: #d97706;
}

#selectROICenterBtn.active {
  background: #10b981;
  border-color: #059669;
}

.roi-info {
  background: #1f2937;
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 6px 8px;
}

#roi_width, #roi_height {
  margin-top: 4px;
}
