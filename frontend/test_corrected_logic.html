<!DOCTYPE html>
<html>
<head>
    <title>Test Corrected Color Classification Logic</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .details { font-family: monospace; background-color: #f8f9fa; padding: 10px; margin: 10px 0; }
        .requirement-box { background-color: #e3f2fd; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #2196f3; }
    </style>
</head>
<body>
    <h1>æ³¢å³°é¢œè‰²åˆ†ç±»é€»è¾‘ä¿®æ­£æµ‹è¯•</h1>

    <div class="requirement-box">
        <h3>ç”¨æˆ·éœ€æ±‚:</h3>
        <p>ğŸŸ© <strong>ç»¿è‰²</strong>: (å5å¸§å¹³å‡ - å‰5å¸§å¹³å‡) &gt; 2.1</p>
        <p>ğŸŸ¥ <strong>çº¢è‰²</strong>: (å5å¸§å¹³å‡ - å‰5å¸§å¹³å‡) â‰¤ 2.1</p>
    </div>

    <div id="testResults"></div>

    <script>
        // ä¿®æ­£åçš„é¢œè‰²åˆ†ç±»å‡½æ•°
        function classifyPeakColor(frameDifference, differenceThreshold) {
            if (frameDifference === null) {
                return 'white'; // è¾¹ç•Œæƒ…å†µï¼Œæ•°æ®ä¸è¶³
            }

            // å¦‚æœå5å¸§å¹³å‡å€¼æ¯”å‰5å¸§å¤§è¶…è¿‡é˜ˆå€¼ï¼Œæ ‡ç»¿è‰²ï¼Œå¦åˆ™çº¢è‰²
            return frameDifference > differenceThreshold ? 'green' : 'red';
        }

        function runTests() {
            const results = document.getElementById('testResults');
            let allPassed = true;
            const threshold = 2.1;

            results.innerHTML += '<h2>æµ‹è¯•ç»“æœ:</h2>';

            // Test 1: å·®å€¼ > 2.1 åº”è¯¥æ˜¯ç»¿è‰²
            const test1a = classifyPeakColor(3.5, threshold) === 'green';
            const test1b = classifyPeakColor(2.2, threshold) === 'green';
            const test1c = classifyPeakColor(5.0, threshold) === 'green';
            const test1 = test1a && test1b && test1c;
            allPassed = allPassed && test1;

            results.innerHTML += `
                <div class="test-result ${test1 ? 'success' : 'error'}">
                    <h3>Test 1: å·®å€¼ > 2.1 åº”è¯¥æ˜¯ç»¿è‰²</h3>
                    <p>3.5 > 2.1: ${classifyPeakColor(3.5, threshold)} ${test1a ? 'âœ…' : 'âŒ'}</p>
                    <p>2.2 > 2.1: ${classifyPeakColor(2.2, threshold)} ${test1b ? 'âœ…' : 'âŒ'}</p>
                    <p>5.0 > 2.1: ${classifyPeakColor(5.0, threshold)} ${test1c ? 'âœ…' : 'âŒ'}</p>
                    <p>Status: ${test1 ? 'PASSED' : 'FAILED'}</p>
                </div>
            `;

            // Test 2: å·®å€¼ â‰¤ 2.1 åº”è¯¥æ˜¯çº¢è‰²
            const test2a = classifyPeakColor(2.1, threshold) === 'red';
            const test2b = classifyPeakColor(1.5, threshold) === 'red';
            const test2c = classifyPeakColor(0.0, threshold) === 'red';
            const test2d = classifyPeakColor(-1.0, threshold) === 'red';
            const test2 = test2a && test2b && test2c && test2d;
            allPassed = allPassed && test2;

            results.innerHTML += `
                <div class="test-result ${test2 ? 'success' : 'error'}">
                    <h3>Test 2: å·®å€¼ â‰¤ 2.1 åº”è¯¥æ˜¯çº¢è‰²</h3>
                    <p>2.1 â‰¤ 2.1: ${classifyPeakColor(2.1, threshold)} ${test2a ? 'âœ…' : 'âŒ'}</p>
                    <p>1.5 â‰¤ 2.1: ${classifyPeakColor(1.5, threshold)} ${test2b ? 'âœ…' : 'âŒ'}</p>
                    <p>0.0 â‰¤ 2.1: ${classifyPeakColor(0.0, threshold)} ${test2c ? 'âœ…' : 'âŒ'}</p>
                    <p>-1.0 â‰¤ 2.1: ${classifyPeakColor(-1.0, threshold)} ${test2d ? 'âœ…' : 'âŒ'}</p>
                    <p>Status: ${test2 ? 'PASSED' : 'FAILED'}</p>
                </div>
            `;

            // Test 3: è¾¹ç•Œæƒ…å†µåº”è¯¥æ˜¯ç™½è‰²
            const test3 = classifyPeakColor(null, threshold) === 'white';
            allPassed = allPassed && test3;

            results.innerHTML += `
                <div class="test-result ${test3 ? 'success' : 'error'}">
                    <h3>Test 3: è¾¹ç•Œæƒ…å†µåº”è¯¥æ˜¯ç™½è‰²</h3>
                    <p>null å·®å€¼: ${classifyPeakColor(null, threshold)} ${test3 ? 'âœ…' : 'âŒ'}</p>
                    <p>Status: ${test3 ? 'PASSED' : 'FAILED'}</p>
                </div>
            `;

            // Test 4: ä¸åŒé˜ˆå€¼çš„æµ‹è¯•
            const customThreshold = 3.0;
            const test4a = classifyPeakColor(3.5, customThreshold) === 'green';
            const test4b = classifyPeakColor(2.5, customThreshold) === 'red';
            const test4 = test4a && test4b;
            allPassed = allPassed && test4;

            results.innerHTML += `
                <div class="test-result ${test4 ? 'success' : 'error'}">
                    <h3>Test 4: è‡ªå®šä¹‰é˜ˆå€¼æµ‹è¯• (é˜ˆå€¼ = 3.0)</h3>
                    <p>3.5 > 3.0: ${classifyPeakColor(3.5, customThreshold)} ${test4a ? 'âœ…' : 'âŒ'}</p>
                    <p>2.5 â‰¤ 3.0: ${classifyPeakColor(2.5, customThreshold)} ${test4b ? 'âœ…' : 'âŒ'}</p>
                    <p>Status: ${test4 ? 'PASSED' : 'FAILED'}</p>
                </div>
            `;

            // Overall result
            results.innerHTML += `
                <div class="test-result ${allPassed ? 'success' : 'error'}">
                    <h2>æ•´ä½“ç»“æœ: ${allPassed ? 'âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ - é€»è¾‘ä¿®æ­£æ­£ç¡®!' : 'âŒ æµ‹è¯•å¤±è´¥ - éœ€è¦æ£€æŸ¥é€»è¾‘'}</h2>
                    <p>ä¿®æ­£åçš„é¢œè‰²åˆ†ç±»é€»è¾‘ç°åœ¨ç¬¦åˆç”¨æˆ·éœ€æ±‚ã€‚</p>
                    <div class="details">
                        <strong>ä¿®æ­£å†…å®¹:</strong><br>
                        1. JavaScript: classifyPeakColor() å‡½æ•°é€»è¾‘åè½¬<br>
                        2. HTML: é¢œè‰²å›¾ä¾‹è¯´æ˜æ›´æ–°<br>
                        3. æ³¨é‡Š: å‡½æ•°å†…éƒ¨è¯´æ˜æ›´æ–°
                    </div>
                </div>
            `;
        }

        window.addEventListener('load', runTests);
    </script>
</body>
</html>